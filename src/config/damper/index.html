<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#317EFB" />
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../../global.css">
    <link rel="stylesheet" href="style.css">
    <title>Config Dampers</title>
</head>
<body>
    <div class="nav">
        <div class="nav-font"><a href="../index.html">BACK</a></div>
    </div>

    <div class="content">
       <div class="section">
        <div class="value"></div>
        <div class="dec button">-</div>
        <div class="inc button">+</div>
       </div>
       <div class="section"></div>
    </div>
    <script src="../../global.js"></script>
    <script>
        let animate= async() => {
            let config = await getConfig()

            let content = document.querySelector('.content')

            content.innerHTML = `
            <div class="section">
            <div class="value">${config["num_dampers"]}</div>
            <div class="dec button" data="num_dampers">-</div>
            <div class="inc button" data="num_dampers">+</div>
            </div>
            <div class="section">
            <div class="value">${config["damper_step"]}</div>
            <div class="dec button" data="damper_step">-</div>
            <div class="inc button" data="damper_step">+</div>
            </div>
       `

            let inc = document.querySelectorAll('.inc')
            let dec = document.querySelectorAll('.dec')

            inc[0].addEventListener('click', (event) => {
                if(config[event.target.getAttribute('data')] < 20){
                    config[event.target.getAttribute('data')] += 1
                }
                setConfig(config)
                setTimeout(animate, 0)
            })
            inc[1].addEventListener('click', (event) => {
                if(config[event.target.getAttribute('data')] < 20){
                    config[event.target.getAttribute('data')] += 1
                }
                setConfig(config)
                setTimeout(animate, 0)
            })
            dec[0].addEventListener('click', (event) => {
                if(config[event.target.getAttribute('data')] > 1){
                    config[event.target.getAttribute('data')] -= 1
                }
                setConfig(config)
                setTimeout(animate, 0)
            })
            dec[1].addEventListener('click', (event) => {
                if(config[event.target.getAttribute('data')] > 1){
                    config[event.target.getAttribute('data')] -= 1
                }
                setConfig(config)
                setTimeout(animate, 0)
            })
            


        }
        
        animate()
    </script>
</body>
</html>
