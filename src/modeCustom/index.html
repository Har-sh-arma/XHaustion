<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mode Custom</title>
    <link rel="stylesheet" href="/global.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="nav">
        <div class="nav-font"><a href="/">DASHBOARD</a></div>
        <div class="nav-font"><a href="../hood/">HOODS</a></div>
        <div class="nav-font"><a href="../fan/">FAN</a></div>
        <div class="nav-font"><a href="../help/">HELP</a></div>
        <div class="nav-font"><a href="../config/">CONFIG</a></div>
      </div>
    <div class="content">
        <div class="heading"></div>
        <div class="left">
            <div class="fan_area">
            </div>
        </div>
        <div class="right">
            <div class="damper_area">
                
            </div>
        </div>
    </div>
    <script>
        // Pull this app state and global config
        let mode = {"Mode 1":{"fans": {"exhaust": 10, "intake": 5 }, "dampers" : [25, 25, 25, 25 ]}}
        
        const heading = document.querySelector('.heading')
        let arr = Object.entries(mode)
        heading.innerText = `Customize: ${arr[0][0]}`

        const fan_area = document.querySelector('.fan_area')
        const damper_area = document.querySelector('.damper_area')

        let fans = Object.entries(mode[arr[0][0]]['fans'])
        let dampers = Object.entries(mode[arr[0][0]]['dampers'])


        for(let i = 0; i < fans.length; i++){
            let div = document.createElement('div')
            div.classList.add('fan')
            let label_div = document.createElement('div')
            label_div.classList.add('label')
            label_div.innerText = `${fans[i][0]}:`
            div.appendChild(label_div)

            let input = document.createElement('input')
            input.type = 'range'
            input.min = '0'
            input.max = '100'
            input.value = fans[i][1]
            input.classList.add('fan_input')
            input.classList.add(fans[i][0])
            input.addEventListener('input', (e) => {
                mode[arr[0][0]]['fans'][e.target.classList[1]] = e.target.value
            })
            div.appendChild(input)
            fan_area.appendChild(div)
        }
        
        damper = document.createElement('div')
        damper.classList.add('damper_heading')
        damper.innerText = 'Dampers :'
        damper_area.appendChild(damper)
        for(let i = 0; i < dampers.length; i++){
            console.log(dampers[i]);
            let input = document.createElement('input')
            input.type = 'range'
            input.min = '0'
            input.max = '100'
            input.value = dampers[i][1]
            input.classList.add('fan_input')
            input.classList.add(dampers[i][0])
            input.addEventListener('input', (e) => {
                mode[arr[0][0]]['dampers'][e.target.classList[1]] = e.target.value
            })
            damper_area.appendChild(input)
        }
    </script>
</body>
</html>